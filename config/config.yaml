# ==============================
# Project Metadata
# ==============================
project:
  name: "Intelligent Demand Sensing & Autonomous Inventory Planning"
  short_name: "IDS"
  version: "1.0.0"
  environment: "local"
  timezone: "Asia/Kolkata"


# ==============================
# Paths
# ==============================
paths:
  data:
    raw: "data/raw"
    processed: "data/processed"
    calendar: "data/calendar"
    external: "data/external"

  output:
    forecasts: "output/forecasts"
    inventory: "output/inventory"
    metrics: "output/metrics"
    plots: "output/plots"
    reports: "output/reports"
    models: "output/model"

  logs: "logs"


# ==============================
# Logging & Reproducibility
# ==============================
logging:
  level: "INFO"
  log_to_file: true
  filename: "ids_project.log"

seeds:
  global_seed: 42


# ==============================
# Data Schema & Normalization
# ==============================
data_schema:
  date_column: "date"
  target_column: "total_sales"

  required_columns:
    - date
    - total_sales
    - sales_open
    - sales_closed
    - is_festival
    - is_holiday

  optional_columns:
    
    - festival_name
    - is_promo
    - weekday_weekend
    - day

  normalize_columns: true

  rename_map:
    date: ["date"]
    total_sales: ["total_sales", "sales", "total"]
    sales_open: ["sales_open", "open_sales"]
    sales_closed: ["sales_closed", "closed_sales"]

    is_festival: ["festival", "festival_flag", "is_festival"]
    festival_name: ["festival_name", "fest_name"]

    is_holiday: ["holiday", "is_holiday"]
    is_promo: ["promo", "promotion", "is_promo"]

    weekday_weekend: ["weekday_weekend", "week_type"]
    day: ["day", "weekday", "day_of_week"]


# ==============================
# Feature Engineering
# ==============================
features:
  lag_features:
    enabled: true
    lags: [1, 7, 14, 30]

  rolling_features:
    enabled: true
    windows: [7, 14, 30]

  calendar_features:
    enabled: true
    day_of_week: true
    is_weekend: true
    month: true

  include_promotions: true

  demand_bucketing:
    method: "quantile"
    labels: ["Low", "Medium", "High"]


# ==============================
# Modeling (Base Training Params)
# ==============================
modeling:
  train_test_split:
    method: "time"
    test_days: 90

  forecast_horizon_days: 365

  models:
    linear_regression:
      enabled: true

    random_forest:
      enabled: true
      params:
        n_estimators: 200
        max_depth: 10
        random_state: 42

    xgboost:
      enabled: true
      params:
        learning_rate: 0.1
        n_estimators: 150
        max_depth: 8
        random_state: 42

    lightgbm:
      enabled: true
      params:
        learning_rate: 0.05
        n_estimators: 200
        max_depth: -1
        random_state: 42

    prophet:
      enabled: true
      yearly_seasonality: true
      weekly_seasonality: true


# ==============================
# Hyperparameter Tuning (Optional)
# ==============================
hyperparameter_tuning:
  enabled: false

  random_forest:
    n_estimators: [100, 200, 300]
    max_depth: [5, 10, 20]

  xgboost:
    learning_rate: [0.05, 0.1]
    max_depth: [6, 8]


# ==============================
# Ensemble
# ==============================
ensemble:
  method: "stacking"
  meta_model: "linear_regression"


# ==============================
# Inventory Planning
# ==============================
inventory:
  service_level: 0.95
  lead_time_days: 7
  demand_variability_method: "std"


# ==============================
# LLM What-if Agent
# ==============================
llm:
  enabled: true
  model_name: "gpt-4"
  temperature: 0.2
  max_tokens: 500
  fallback_regex: true

  guardrails:
    max_demand_change_pct: 50
    max_lead_time_multiplier: 3


# ==============================
# Execution Controls
# ==============================
execution:
  save_intermediate_outputs: true
  overwrite_existing_outputs: false
